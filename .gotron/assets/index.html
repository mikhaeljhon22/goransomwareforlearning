<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .screen {
  position: absolute;
  overflow: hidden;
  width: 100%;
  height: 100%;
  background: #000000;
}

.terminal_emulator {
  position: absolute;
  bottom: 0;
  width: 100%;
  min-height: 100%;
  
  
  padding: 40px;
  font-size: 20px;
  line-heght: 25px;
  box-sizing: border-box;
  text-align:left;
  
  font-family: monospace;
  font-weight: 700;  
  
  color: #99ff99;
}

.terminal_emulator__field,
.terminal_emulator__command {
  
  position: relative;
  
  padding: 0 1em;
  margin: 0 0 9px 0;
  
  &:before,
  &:after {
    position: absolute;
  }
  
  &:before {
    left:0;
    top: 0;
    content:">";
  }
  
}

.terminal_emulator__response,
.terminal_emulator__command b{
  padding-bottom: 9px;
}

.terminal_emulator__field {
  display: inline-block;
  min-width: 1em;
  min-height: 1.5em;
  box-sizing: border-box;
  &:after {
    right: 0;
    bottom: 0.25em;
    
    content:"";
    width: 1em;
    height: 1.5em;
    background:#99ff99;
  
    animation: caretBlink 1s infinite;
  }
  
  &.waiting {
    padding-left: 0;
    padding-right: 0;
    &:before {
      display: none;
    }
  }
}

@keyframes caretBlink {
  0% {
    opacity: 0;
  }
  
  50% {
    opacity: 0;
  }
  
  51% {
    opacity: 1;
  }
  
  100% {
    opacity: 1;
  }
}
    </style>
</head>
<body>
<div class="screen">
   <div id="screen" class="terminal_emulator"></div>
</div>

<script>
    var TerminalEmulator = {
  init: function(screen) {
    var inst = Object.create(this);
    inst.screen = screen;
    inst.createInput();
    
    return inst;
  },

  createInput: function() {
    var inputField = document.createElement('div');
    var inputWrap = document.createElement('div');
    
    inputField.className = 'terminal_emulator__field';
    inputField.innerHTML = '';
    inputWrap.appendChild(inputField);
    this.screen.appendChild(inputWrap);
    this.field = inputField;
    this.fieldwrap = inputWrap;
  },


  enterInput: function(input) {
    return new Promise( (resolve, reject) => {
    var randomSpeed = (max, min) => { 
      return Math.random() * (max - min) + min; 
    }
      
    var speed = randomSpeed(70, 90);
    var i = 0;
    var str = '';
    var type = () => {
      
      str = str + input[i];
      this.field.innerHTML = str.replace(/ /g, '&nbsp;');
      i++;
      
      setTimeout( () => {
        if( i < input.length){
          if( i % 5 === 0) speed = randomSpeed(80, 120);
          type();
        }else {
          console.log('tick');
          setTimeout( () => {
            console.log('tock');
            resolve();
          }, 400);
          
        } 
      }, speed);
      
      
    };
    
    
    type();
      
    });
  },
  
  enterCommand: function() {
    return new Promise( (resolve, reject ) => {
      var resp = document.createElement('div');
      resp.className = 'terminal_emulator__command';
      resp.innerHTML = this.field.innerHTML;
      this.screen.insertBefore( resp, this.fieldwrap);
      
      this.field.innerHTML = '';
      resolve();
    })
  },

  enterResponse: function(response) {
    
    return new Promise( (resolve, reject ) => {
      var resp = document.createElement('div');
      resp.className = 'terminal_emulator__response';
      resp.innerHTML = response;
      this.screen.insertBefore( resp, this.fieldwrap);
      
      resolve();
    })
  
    
  },
  
  wait : function( time, busy ) {
    busy = (busy === undefined ) ? true : busy;
    return new Promise( (resolve, reject) => {
       if (busy){
         this.field.classList.add('waiting');
       } else {
         this.field.classList.remove('waiting');
       }
       setTimeout( () => {
          resolve();
      }, time);
    });
  },
  
  reset : function() {
    return new Promise( (resolve, reject) => {
      this.field.classList.remove('waiting');
      resolve();
    });
  }

};


/*
 * 
 * This is where the magic happens
 *
 */ 


var TE = TerminalEmulator.init(document.getElementById('screen'));


TE.wait(1000, false)
  .then( TE.enterInput.bind(TE, 'AMARAN!') )
  .then( TE.enterCommand.bind( TE ) )
  .then(TE.enterResponse.bind(TE, 'Awak Secara Tak Sengaja Telah Muat Turun Ransomware Ini.Komputer Awak Kini Seluruh Fail Telah Terenkripsi' ))
  .then( TE.wait.bind(TE, 2000) )
  .then( TE.enterResponse.bind(TE, 'Sila Tebus 1BTC dan Saya Akan Membagi Kunci serta Decryptor') )
  .then( TE.wait.bind(TE, 600) )
  .then( TE.enterResponse.bind(TE, 'Tebus Sekarang Atau Saya Akan Sebar Fail Awak') );
</script>
</body>
</html>